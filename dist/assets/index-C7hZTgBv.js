(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function p(){const t=document.getElementById("gpxFileInput");if(!t){console.error("gpxFileInput is not defined or not selected correctly.");return}t.addEventListener("change",m);const e=document.getElementById("fileInputLabel");e.addEventListener("click",()=>t.click()),e.addEventListener("keypress",n=>{(n.key==="Enter"||n.key===" ")&&t.click()})}function m(t){const e=t.target.files[0];if(!e)return;const n=new FileReader;n.onload=i=>f(i.target.result),n.readAsText(e)}function f(t){const e=new DOMParser().parseFromString(t,"application/xml"),n=toGeoJSON.gpx(e),i=L(n);g(i),y(n)}function g(t){const e=JSON.stringify(t);console.log(e),Procedural.addOverlay(JSON.parse(e))}function y(t){if(t.features.length>0&&t.features[0].geometry.coordinates.length>0){const e=t.features[0].geometry.coordinates[0];console.log("startingCoordinate",e),Procedural.displayLocation({latitude:e[1],longitude:e[0]})}}function L(t){let e=0;return{name:"example",type:"FeatureCollection",features:t.features.map(i=>({id:e++,type:"Feature",geometry:i.geometry,properties:{color:"#f30e32"}}))}}p();function P(){document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("displayLocationBtn"),e=document.getElementById("latitudeInput"),n=document.getElementById("longitudeInput"),i=()=>{const r=parseFloat(e.value),a=parseFloat(n.value);!isNaN(r)&&!isNaN(a)?(Procedural.displayLocation({latitude:r,longitude:a}),updateURLParameters({lat:r.toString(),lng:a.toString()})):alert("Please enter valid latitude and longitude values.")};t.addEventListener("click",i);const o=r=>{r.key==="Enter"&&i()};e.addEventListener("keypress",o),n.addEventListener("keypress",o)})}P();const E="pk.eyJ1IjoiYWdyYW1tYXQiLCJhIjoiY2xoNHNkZ3lkMG9iYTNnbzVhY2F4ZnN1ZCJ9.qPqebUE9RSdLRMU4f0H3zw";let l=null,s=48.210033,c=16.363449;function I(){const t=u("map")||"DSM",e=parseFloat(u("lat")),n=parseFloat(u("lng"));!isNaN(e)&&!isNaN(n)&&(s=e,c=n);const i=t==="DSM"?"http://alpinemaps.cg.tuwien.ac.at/tiles/mapbox_terrain_rgb/{z}/{x}/{y}.png":`https://api.mapbox.com/v4/mapbox.terrain-rgb/{z}/{x}/{y}@2x.pngraw?access_token=${E}`;h(i),C()}function b(){l&&(l.dispose(),l=null)}function h(t){b();const e=document.getElementById("map");e.innerHTML="";const n=v(t);l=Procedural.init({container:e,datasource:n}),x(),Procedural.displayLocation({latitude:s,longitude:c})}function v(t){return{elevation:{apiKey:"YOUR_ELEVATION_API_KEY",attribution:"Elevation attribution",pixelEncoding:"terrain-rgb",maxZoom:14,urlFormat:t},imagery:{apiKey:"YOUR_IMAGERY_API_KEY",attribution:"Imagery attribution",maxZoom:21,urlFormat:"https://maps.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg"}}}function x(){Procedural.setCameraModeControlVisible(!0),Procedural.setCompassVisible(!0),Procedural.setUserLocationControlVisible(!0),Procedural.setRotationControlVisible(!0),Procedural.setZoomControlVisible(!0);var t={minDistance:10,maxDistance:5e6,maxBounds:7500,minPolarAngle:.05*Math.PI,maxPolarAngle:1*Math.PI,noPan:!1,noRotate:!1,noZoom:!1};Procedural.configureControls(t)}function u(t){return new URL(window.location).searchParams.get(t)}function d(t){const e=new URL(window.location);Object.keys(t).forEach(n=>{e.searchParams.set(n,t[n])}),window.location.href=e.toString()}function C(){document.getElementById("dsmButton").addEventListener("click",()=>{d({map:"DSM",lat:s.toString(),lng:c.toString()})}),document.getElementById("dtmButton").addEventListener("click",()=>{d({map:"DTM",lat:s.toString(),lng:c.toString()})})}I();
