(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=r(e);fetch(e.href,o)}})();gpxFileInput?gpxFileInput.addEventListener("change",function(t){L(t)}):console.error("gpxFileInput is not defined or not selected correctly.");function L(t){const n=t.target.files[0];if(n){const r=new FileReader;r.onload=function(i){const e=new DOMParser().parseFromString(i.target.result,"application/xml"),o=toGeoJSON.gpx(e);let a=b(o),p=JSON.stringify(a);if(console.log(p),Procedural.addOverlay(JSON.parse(p)),console.log("startingCoordinate"),o.features.length>0&&o.features[0].geometry.coordinates.length>0){const u=o.features[0].geometry.coordinates[0];console.log("startingCoordinate",u),Procedural.displayLocation({latitude:u[1],longitude:u[0]})}},r.readAsText(n)}}function b(t){let n=0;return{name:"example",type:"FeatureCollection",features:t.features.map(i=>({id:n++,type:"Feature",geometry:i.geometry,properties:{color:"#f30e32"}}))}}document.getElementById("fileInputLabel").addEventListener("click",function(){document.getElementById("gpxFileInput").click()});document.getElementById("fileInputLabel").addEventListener("keypress",function(t){(t.key==="Enter"||t.key===" ")&&document.getElementById("gpxFileInput").click()});const E="pk.eyJ1IjoiYWdyYW1tYXQiLCJhIjoiY2xoNHNkZ3lkMG9iYTNnbzVhY2F4ZnN1ZCJ9.qPqebUE9RSdLRMU4f0H3zw";let l=null,s=48.210033,c=16.363449;function I(){l&&(l.dispose(),l=null)}function m(t){I();const n=document.getElementById("map");n.innerHTML="";const r={elevation:{apiKey:"YOUR_ELEVATION_API_KEY",attribution:"Elevation attribution",pixelEncoding:"terrain-rgb",maxZoom:14,urlFormat:t},imagery:{apiKey:"YOUR_IMAGERY_API_KEY",attribution:"Imagery attribution",maxZoom:21,urlFormat:"https://maps.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg"}};l=Procedural.init({container:n,datasource:r}),Procedural.setCameraModeControlVisible(!0),Procedural.setCompassVisible(!0),Procedural.setUserLocationControlVisible(!0),Procedural.setRotationControlVisible(!0),Procedural.setZoomControlVisible(!0);var i={minDistance:10,maxDistance:5e6,maxBounds:7500,minPolarAngle:.05*Math.PI,maxPolarAngle:1*Math.PI,noPan:!1,noRotate:!1,noZoom:!1};Procedural.configureControls(i),Procedural.displayLocation({latitude:s,longitude:c})}function d(t){return new URL(window.location).searchParams.get(t)}const g=d("map")||"DSM",f=parseFloat(d("lat")),y=parseFloat(d("lng"));!isNaN(f)&&!isNaN(y)&&(s=f,c=y);g==="DSM"?m("http://alpinemaps.cg.tuwien.ac.at/tiles/mapbox_terrain_rgb/{z}/{x}/{y}.png"):g==="DTM"&&m(`https://api.mapbox.com/v4/mapbox.terrain-rgb/{z}/{x}/{y}@2x.pngraw?access_token=${E}`);function P(t){const n=new URL(window.location);Object.keys(t).forEach(r=>{n.searchParams.set(r,t[r])}),window.location.href=n.toString()}document.getElementById("dsmButton").addEventListener("click",function(){P({map:"DSM",lat:s.toString(),lng:c.toString()})});document.getElementById("dtmButton").addEventListener("click",function(){P({map:"DTM",lat:s.toString(),lng:c.toString()})});
